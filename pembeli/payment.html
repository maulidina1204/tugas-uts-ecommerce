<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pembayaran - Goguma Roll</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #9333ea, #a855f7, #c084fc);
        color: #fff;
        padding: 30px;
      }

      .container {
        max-width: 800px;
        margin: auto;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.25);
        backdrop-filter: blur(6px);
      }

      h1 {
        text-align: center;
        margin-bottom: 25px;
      }

      .summary {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 20px;
      }

      .summary div {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        padding: 6px 0;
      }

      .btn {
        display: block;
        width: 100%;
        background: #fff;
        color: #7e22ce;
        border: none;
        padding: 14px;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.3s;
        margin-top: 15px;
      }

      .btn:hover {
        background: #f3e8ff;
      }

      .back-link {
        display: inline-block;
        margin-bottom: 10px;
        color: #fff;
        text-decoration: underline;
      }

      .note {
        font-size: 0.9em;
        color: #fef9c3;
        margin-top: 10px;
      }
    </style>
  </head>

  <body>
    <a href="checkout.html" class="back-link">‚Üê Kembali ke Checkout</a>
    <h1>Konfirmasi Pembayaran üíú</h1>

    <div class="container">
      <div class="summary" id="payment-summary"></div>

      <p class="note">
        Setelah melakukan pembayaran, klik tombol di bawah untuk konfirmasi via
        WhatsApp admin.
      </p>

      <button class="btn" id="wa-btn">Konfirmasi via WhatsApp üì±</button>
    </div>

    <script>
      const orderData = JSON.parse(localStorage.getItem("orderData"));

      const summaryDiv = document.getElementById("payment-summary");
      if (!orderData) {
        summaryDiv.innerHTML =
          '<p>Data pesanan tidak ditemukan. Silakan kembali ke <a href="checkout.html" style="color:#fff;">halaman checkout</a>.</p>';
      } else {
        let total = 0;
        let cartList = "";
        orderData.cart.forEach((item) => {
          const itemTotal = item.price * (item.qty || 1);
          total += itemTotal;
          cartList += `${item.name} x${
            item.qty || 1
          } = Rp ${itemTotal.toLocaleString()}\n`;
        });

        summaryDiv.innerHTML = `
          <h3>Detail Pembayaran</h3>
          <div><strong>Nama:</strong> <span>${orderData.name}</span></div>
          <div><strong>Nomor WhatsApp:</strong> <span>${
            orderData.whatsapp
          }</span></div>
          <div><strong>Alamat:</strong> <span>${orderData.address}</span></div>
          <div><strong>Catatan:</strong> <span>${
            orderData.note || "-"
          }</span></div>
          <div><strong>Metode Pembayaran:</strong> <span>${
            orderData.payment
          }</span></div>
          <div style="font-weight:700;margin-top:10px;">Total: Rp ${total.toLocaleString()}</div>
        `;

        document.getElementById("wa-btn").addEventListener("click", () => {
          const adminNumber = "6281413304002"; // 
          const message = encodeURIComponent(
            `Halo Admin Goguma Roll üëã\n\nSaya ingin konfirmasi pesanan:\n\n${cartList}\nTotal: Rp ${total.toLocaleString()}\n\nNama: ${
              orderData.name
            }\nNo. WA: ${orderData.whatsapp}\nAlamat: ${
              orderData.address
            }\nCatatan: ${orderData.note || "-"}\n\nMetode Pembayaran: ${
              orderData.payment
            }\n\nTerima kasih üíú`
          );

          window.open(`https://wa.me/${adminNumber}?text=${message}`, "_blank");
        });
      }
    </script>
  </body>
</html>
